(function(e){function t(t){for(var s,i,r=t[0],u=t[1],l=t[2],c=0,m=[];c<r.length;c++)i=r[c],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&m.push(n[i][0]),n[i]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s]);d&&d(t);while(m.length)m.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],s=!0,r=1;r<o.length;r++){var u=o[r];0!==n[u]&&(s=!1)}s&&(a.splice(t--,1),e=i(i.s=o[0]))}return e}var s={},n={app:0},a=[];function i(t){if(s[t])return s[t].exports;var o=s[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=s,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(o,s,function(t){return e[t]}.bind(null,s));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],u=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=u;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},1:function(e,t){},"164d":function(e,t,o){"use strict";var s=o("a977"),n=o.n(s);n.a},"21b4":function(e,t,o){"use strict";var s=o("21d2"),n=o.n(s);n.a},"21d2":function(e,t,o){},"2fe5":function(e,t,o){},3673:function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("dac5"),o("6e26"),o("9604"),o("df67");var s=o("6e6d"),n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"app"}},[o("div",{staticClass:"tab-container"},[o("router-view")],1),o("div",{staticClass:"tab"},[o("mt-tabbar",{model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[o("mt-tab-item",{attrs:{id:"login"}},[o("router-link",{attrs:{to:"login",id:"loginComponent"}},[e._v("登录")])],1),o("mt-tab-item",{attrs:{id:"query"}},[o("router-link",{attrs:{to:"query"}},[e._v("编码查询")])],1),o("mt-tab-item",{attrs:{id:"image"}},[o("router-link",{attrs:{to:"image"}},[e._v("图像查询")])],1)],1)],1)])},a=[],i={data:function(){return{selected:"",value:""}},methods:{checkIsHidden:function(){var e=sessionStorage.getItem("user");if(void 0==e)this.$router.push({path:"login"});else{var t=document.getElementById("loginComponent").parentNode;t.parentNode.remove(),this.$router.push({path:"query"})}}},mounted:function(){this.checkIsHidden()}},r=i,u=(o("5c0b"),o("6691")),l=Object(u["a"])(r,n,a,!1,null,null,null),d=l.exports,c=o("660a"),m=o.n(c),g=(o("4f89"),o("7893")),p=o.n(g),f=(o("610a"),o("c478")),b=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"hello"},[o("div",{staticClass:"login"},[o("mt-field",{attrs:{label:"用户名:",placeholder:"请输入用户名"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}}),o("mt-field",{attrs:{label:"密码:",placeholder:"请输入密码",type:"password"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),o("div",{staticClass:"button"},[o("mt-button",{attrs:{type:"primary",size:"large",disabled:e.user.logining},nativeOn:{click:function(t){return e.loginEvent(t)}}},[e._v(e._s(e.user.buttonValue))])],1)])},h=[],_="http://cpm.tajansoft.com/mobile/",v={BASE_URL:_},k=v,y={data:function(){return{user:{username:"",password:"",logining:!1,buttonValue:"登录"}}},methods:{loginEvent:function(){var e=this;if(""==this.user.username)return Object(c["Toast"])({message:"请输入用户名",position:"bottom",duration:3e3}),!1;if(""==this.user.password)return Object(c["Toast"])({message:"请输入密码",position:"bottom",duration:3e3}),!1;this.user.logining=!0,this.user.buttonValue="登录中...";var t={username:this.user.username,password:this.user.password};this.$http.post(k.BASE_URL+"login/",t,{emulateJSON:!0}).then((function(t){if(console.log(t.body),e.user.logining=!1,e.user.buttonValue="登录","0"==t.body.code){sessionStorage.setItem("user","user"),e.$router.push({path:"query"}),Object(c["Toast"])({message:"登陆成功",position:"top",duration:3e3});var o=document.getElementById("loginComponent").parentNode;o.parentNode.remove()}else Object(c["Toast"])({message:t.body.msg,position:"top",duration:3e3})}))}},beforeRouteEnter:function(e,t,o){console.log(t),o()}},C=y,O=(o("a30e"),Object(u["a"])(C,b,h,!1,null,"f79d0c90",null)),j=O.exports,w=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"hello"},[o("div",{staticClass:"header"},[e._m(0),o("div",{staticClass:"upload_file",attrs:{logining:e.image.logining},on:{click:function(t){return e.searchImage(t)}}},[e._v("\n            点击搜索\n        ")])]),o("div",{staticClass:"demo-image__placeholder display-content"},[o("div",{staticClass:"block"},[o("div",{staticClass:"good"},[o("span",{staticClass:"demonstration"},[e._v("产品编码: "+e._s(e.image.code))]),o("span",{staticClass:"demonstration"},[e._v("产品名称: "+e._s(e.image.name))])]),o("div",{staticClass:"sku"},[o("span",{staticClass:"demonstration"},[e._v("sku编码: "+e._s(e.image.sku_code))]),o("span",{staticClass:"demonstration"},[e._v("sku名称: "+e._s(e.image.sku_name))])])]),o("div",{staticClass:"img_out"},e._l(e.list,(function(t,s){return o("div",{key:s,staticClass:"two"},[o("el-image",{attrs:{src:t.url,"data-sku_id":t.sku_id},on:{click:function(t){return e.skuImage(t)}}})],1)})),0)])])},E=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"open_camera"},[e._v("\n\n            点击打开相册\n            "),o("input",{staticStyle:{opacity:"0"},attrs:{type:"file",name:"iamge",value:"点击打开相册",id:"imageInput"}})])}],x=(o("7bc1"),o("7364"),o("f763"),{data:function(){return{sheetVisible:!1,actions:[{name:"拍照",method:this.photo}],list:[],image:{logining:!1,buttonValue:"正在搜索中",code:"",name:"",good_id:"",score:"",sku_code:"",sku_id:"",sku_name:"",url:""},datas:new FormData}},methods:{skuImage:function(e){var t=this;console.log(e.srcElement.dataset.sku_id),this.image.sku_id=e.srcElement.dataset.sku_id,this.list.forEach((function(e){e.sku_id==t.image.sku_id&&(t.image.code=e.code,t.image.name=e.name,t.image.sku_code=e.sku_code,t.image.sku_name=e.sku_name)}))},searchImage:function(e){var t=this;if(this.image.logining)return Object(c["Toast"])({message:"请稍后...",position:"top",duration:3e3}),!1;if(void 0==document.getElementById("imageInput").files[0])return Object(c["Toast"])({message:"请上传图片",position:"top",duration:2e3}),!1;var o=document.getElementById("imageInput").files[0]["name"].split(".").pop();if(!/^(jpg|jpeg|png|JPG|PNG|JPEG)$/.test(o))return Object(c["Toast"])({message:"图片格式只支持jpg,png,jpeg",position:"top",duration:2e3}),!1;this.datas.append("image",document.getElementById("imageInput").files[0]),e.srcElement.innerText="正在搜索中...",this.image.logining=!0,this.$http.post(k.BASE_URL+"image/",this.datas).then((function(o){if(e.srcElement.innerText="点击搜索",t.image.logining=!1,"0"==o.body.code){console.log(o.body);var s=o.body.res;t.list=s}else Object(c["Toast"])({message:o.body.msg,position:"top",duration:3e3})}))}},beforeRouteEnter:function(e,t,o){var s=sessionStorage.getItem("user");void 0==s?Object(c["Toast"])({message:"请先登录",position:"top",duration:3e3}):o()}}),I=x,T=(o("21b4"),Object(u["a"])(I,w,E,!1,null,"4b5c6dba",null)),$=T.exports,S=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"hello"},[o("div",{staticClass:"login"},[o("el-form",{ref:"form",attrs:{"label-width":"80px"}},[o("el-form-item",{attrs:{label:"产品编码:"}},[o("el-input",{attrs:{placeholder:"例如：19002"},model:{value:e.good.code,callback:function(t){e.$set(e.good,"code",t)},expression:"good.code"}})],1),o("el-form-item",{attrs:{label:"sku编码:"}},[[o("el-select",{attrs:{size:"medium",filterable:"",remote:"","reserve-keyword":"",placeholder:"例如：19002-001","remote-method":e.remoteMethod,loading:e.good.loading},on:{change:function(t){return e.selectChange(t)}},model:{value:e.good.sku_code,callback:function(t){e.$set(e.good,"sku_code",t)},expression:"good.sku_code"}},e._l(e.list,(function(e){return o("el-option",{key:e.sku_id,attrs:{label:e.sku_code,value:e.sku_code}})})),1)]],2)],1)],1),o("div",{staticClass:"button"},[o("el-button",{attrs:{type:"primary",loading:e.good.isButtonLoading,disabled:e.good.operating},nativeOn:{click:function(t){return e.queryEvent(t)}}},[e._v(e._s(e.good.buttonValue))])],1),o("div",{staticClass:"demo-image__placeholder display-content"},[o("div",{staticClass:"block"},[o("span",{staticClass:"demonstration"},[e._v("产品名称: "+e._s(e.good.name))]),o("span",{staticClass:"demonstration"},[e._v("sku名称: "+e._s(e.good.sku_name))])]),o("el-image",{attrs:{src:e.good.sku_image}})],1)])},B=[],L={data:function(){return{options:[],list:[],states:["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia"],flag:!1,good:{code:"",name:"",skus:[],sku_code:"",sku_name:"",sku_image:"",loading:!1,isButtonLoading:!1,flag:!0,buttonValue:"查询"}}},methods:{queryEvent:function(){var e=this;return""==this.good.code?(Object(c["Toast"])({message:"请输入产品编码",position:"top",duration:3e3}),!1):/^[1,2][0-9]{4}$/.test(this.good.code)?(this.good.buttonValue="查询中...",this.good.isButtonLoading=!0,void this.$http.get(k.BASE_URL+"query/?good_code="+this.good.code).then((function(t){e.good.buttonValue="查询",e.good.isButtonLoading=!1,"0"==t.body.code?(console.log(t.body),e.good.name=t.body.good_name,e.good.skus=t.body.skus,e.good.sku_code=e.good.code+"-"+t.body.skus[0].sku_code,e.good.sku_name=t.body.skus[0].sku_name,e.good.sku_image=t.body.skus[0].sku_image,e.list=t.body.skus.map((function(t){return{id:t.sku_id,sku_code:e.good.code+"-"+t.sku_code,sku_name:t.sku_name,sku_image:t.sku_image}}))):Object(c["Toast"])({message:t.body.msg,position:"top",duration:3e3})}))):(Object(c["Toast"])({message:"请输入正确的产品编码",position:"top",duration:3e3}),!1)},remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,setTimeout((function(){t.loading=!1,t.options=t.list.filter((function(t){return t.label.toLowerCase().indexOf(e.toLowerCase())>-1}))}),200)):this.options=[]},selectChange:function(e){var t=this;console.log(e),this.list.forEach((function(o){o.sku_code==e&&(t.good.sku_name=o.sku_name,t.good.sku_image=o.sku_image)}))}},beforeRouteEnter:function(e,t,o){var s=sessionStorage.getItem("user");void 0==s?Object(c["Toast"])({message:"请先登录",position:"top",duration:3e3}):o()},mounted:function(){}},P=L,V=(o("164d"),Object(u["a"])(P,S,B,!1,null,"0dd14bcc",null)),q=V.exports;s["default"].use(f["a"]);var A=[{path:"/login",component:j},{path:"/image",component:$},{path:"/query",component:q},{path:"*",redirect:"/login"}],R=new f["a"]({routes:A}),M=R,N=o("5a4b");s["default"].use(m.a),s["default"].use(p.a),s["default"].use(N["a"]),s["default"].config.productionTip=!1,new s["default"]({router:M,render:function(e){return e(d)}}).$mount("#app")},"5c0b":function(e,t,o){"use strict";var s=o("3673"),n=o.n(s);n.a},a30e:function(e,t,o){"use strict";var s=o("2fe5"),n=o.n(s);n.a},a977:function(e,t,o){}});
//# sourceMappingURL=app.c158381b.js.map